enchant(),window.onload=(()=>{let e=0,a=new Game(640,1136);a.fps=60,a.keybind(32,"a");["./assets/sounds/rayfami.mp3","./assets/sounds/jump.mp3","./assets/images/bg_1.png","./assets/images/bg_2.png","./assets/images/breathframe.png","./assets/images/climikuji2k19.png","./assets/images/enemy_dotn.png","./assets/images/enemy_iru.png","./assets/images/enemy_ryuks.png","./assets/images/enemy_sum.png","./assets/images/enemy_sy4in.png","./assets/images/title.png","./assets/images/twitter-card.png","./assets/images/ui_bg.png","./assets/images/ui_bg_light.png"].forEach(e=>{a.preload(e)}),a.scale=Math.min(window.innerWidth/a.width,window.innerHeight/a.height);let t=(window.innerWidth-a.width*a.scale)/2,s=(window.innerHeight-a.height*a.scale)/2;$("#enchant-stage").css({position:"absolute",left:t+"px",top:s+"px"}),a.onload=(()=>{let t=a.assets["./assets/sounds/rayfami.mp3"],s=a.assets["./assets/sounds/jump.mp3"],n={normal:{color:"#FFF",background:{type:"linear-gradient",start:"#ff7f7f",end:"#ff7f7f"},border:{color:"#66d0ff",width:1,type:"solid"},textShadow:{offsetX:.5,offsetY:.5,blur:"3px",color:"#F00"},boxShadow:{offsetX:2,offsetY:2,blur:"5px",color:"rgba(0, 0, 0, 0.3)"}},active:{color:"rgb(255, 255, 169)",background:{type:"linear-gradient",start:"#FFF",end:"#FFF"},border:{color:"#ff66b8",width:1,type:"solid"},textShadow:{offsetX:.5,offsetY:.5,blur:"3px",color:"#F00"},boxShadow:{offsetX:2,offsetY:2,blur:"5px",color:"rgba(0, 0, 0, 0.3)"}}};var i=()=>{$.post("https://script.google.com/macros/s/AKfycbwEf0jiuCUTOxCym_pEE2EFNQwtIXqoiWYCOsixyRPbnBSGvdLg/exec");var t=new Scene,i=new Array(5);i.forEach(e=>{Math.floor(30*Math.random())});var r=new Sprite(640,1136);r.image=a.assets["./assets/images/ui_bg.png"],t.addChild(r);var d=new Sprite(900,641);d.image=a.assets["./assets/images/bg_1.png"],d.x=0,d.y=0,t.addChild(d);var g=new Sprite(900,641);g.image=a.assets["./assets/images/bg_2.png"],g.x=900,g.y=0,t.addChild(g);var m=new Label(0);m.color="#000000",m.x=10,m.y=5,m.font="normal normal 15px/1.0 monospace",t.addChild(m);var l=new Sprite(64,64);l.image=a.assets["./assets/images/breathframe.png"],l.x=40,l.y=440,t.addChild(l);var h=new Sprite(64,64);h.image=a.assets["./assets/images/enemy_ryuks.png"],h.x=-h.width,h.y=376,t.addChild(h);var p=new Sprite(64,64);p.image=a.assets["./assets/images/enemy_iru.png"],p.x=-p.width,p.y=440,t.addChild(p);var c=new Sprite(64,64);c.image=a.assets["./assets/images/enemy_dotn.png"],c.x=-c.width,c.y=440,t.addChild(c);var f=new Sprite(64,64);f.image=a.assets["./assets/images/enemy_sum.png"],f.x=-f.width,f.y=440,t.addChild(f);var w=new Sprite(128,64);w.image=a.assets["./assets/images/enemy_sy4in.png"],w.x=-w.width,w.y=340,t.addChild(w);var u=new Button("Jump!",n,180,400);return u.font="12em Arial",u.moveTo(120,820),t.addChild(u),u.ontouchstart=(()=>{440==l.y&&(l.frame=0,l.tl.moveBy(0,-150,12,enchant.Easing.CUBIC_EASEOUT).moveBy(0,150,12,enchant.Easing.CUBIC_EASEIN),s.play())}),t.addEventListener(Event.ENTER_FRAME,()=>{e=2*a.frame,m.text="score: "+e,l.rotation+=2,l.rotation>30&&(l.rotation=0),[d,g].forEach(e=>{e.x-=15,e.x<=-900&&(e.x=900)}),0,a.frame>180&&(a.frame%(80+i[0])==0&&(p.x=640),a.frame%(120+i[1])==0&&(h.x=640),a.frame%(240+i[2])==0&&(c.x=640),e>2e3&&a.frame%(1e3+i[3])==0&&(f.x=640),e>5e3&&a.frame%(1400+i[4])==0&&(w.x=640)),[p,h,c,f,w].forEach((e,t)=>{e.x>-e.width&&(e.x-=4==t?18:3==t?12:15),l.within(e,28)&&a.pushScene(o())}),[p,h,c,f,w].forEach((e,a)=>{e.x<=-e.width&&(i[a]=Math.floor(30*Math.random()))})}),t},o=()=>{var a=new Scene;return a.backgroundColor="rgba(0, 0, 0, 0.5)",a.addEventListener(Event.ENTER_FRAME,function(t){var s=new Button("Retry",n,65,300);s.font="4em Arial",s.moveTo(170,1136/1.5),a.addChild(s),s.ontouchstart=function(){location.reload()};var i=new Button("Tweet",n,65,300);i.font="4em Arial",i.moveTo(170,1136/3),a.addChild(i),i.ontouchstart=function(){(()=>{const a=["モォ～娘","Mojito","エロ同人誌","イクちゃん","Sylenth1","授乳手コキCG","iru1919","クリオンのクリ","チンポ","おっぱいマウスパッド","Clion - Ray","シャインレコーズ","う-21b","今年もよろしくお願いします","5%の確率で性器を露出するクリオン","5000兆円","オナホ","シャッタマ","エロいいね研究会","クリオンくん","VRAV","こんにちは","ミライアカリの乳","手仕込とんかつカレー","ココイチ","paypay","Sy4InRecordsバーチャル部","CLion","クソアマ"],t=a[Math.floor(Math.random()*a.length-1)],s=encodeURIComponent,n=`https://twitter.com/intent/tweet?text=${s(`🎍クリみくじ2019🎍 - 今年の運クリを占おう❕\nあなたの運勢は${e<500?"敏感クリ":e<1e3?"凶クリ":e<2e3?"末クリ":e<3e3?"小クリ":e<4e3?"中クリ":e<5e3?"クリ":e<6e3?"クリクリ":e<7e3?"大クリ":e<8e3?"特大クリ":e<9e3?"超特大クリ":e<1e4?"凶悪クリ":"極悪クリ"}です！ラッキーアイテムは"${t}"`)}&hashtags=${s("クリみくじ,Cli_Omikuji")}&url=https://sometrouble.github.io/climikuji_2019/`;navigator.userAgent.indexOf("iPhone")>0||navigator.userAgent.indexOf("iPad")>0||navigator.userAgent.indexOf("iPod")>0||navigator.userAgent.indexOf("Android")>0?location.href=n:window.open(n,"_blank","top=50,left=50,width=500,height=500,scrollbars=1,location=0,menubar=0,toolbar=0,status=1,directories=0,resizable=1")})()}}),a};a.replaceScene(function(){var e=new Scene,s=new Sprite(640,1136);s.image=a.assets["./assets/images/title.png"],s.x=0,s.y=0,e.addChild(s);var n=new Label("ver.0.0.0");n.x=550,n.y=450,n.font="normal normal 15px/1.0 monospace",e.addChild(n);var o=new Label("touch to start");return o.x=270,o.y=1096,o.font="normal normal 15px/1.0 monospace",o.color="white",e.addChild(o),e.backgroundColor="rgba(255, 230, 0, 1)",e.addEventListener(Event.ENTER_FRAME,e=>{o.opacity=(new Date).getMilliseconds()>500?1:0}),e.addEventListener(Event.TOUCH_START,e=>{a.replaceScene(i()),t.play(),t.src.loop=!0}),e}())}),a.start()});
